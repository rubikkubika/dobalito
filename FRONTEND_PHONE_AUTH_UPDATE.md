# Phone Authentication with Spring Security - Frontend Integration

## –û–±–∑–æ—Ä

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å Spring Security –∏ JWT —Ç–æ–∫–µ–Ω–∞–º–∏. –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã –∏–∑ —Å–ø–∏—Å–∫–∞.

## –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. PhoneInput Component

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤–≤–æ–¥–∞ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å –≤—ã–±–æ—Ä–æ–º –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend-react/src/components/PhoneInput.tsx`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å –∫–æ–¥–∞–º–∏ —Å—Ç—Ä–∞–Ω –∏ —Ñ–ª–∞–≥–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 30+ —Å—Ç—Ä–∞–Ω

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```tsx
import PhoneInput from '../components/PhoneInput';

<PhoneInput
  value={phone}
  onChange={setPhone}
  error={!!validationErrors.phone}
  helperText={validationErrors.phone}
  disabled={loading}
  placeholder="900 123 45 67"
/>
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π AuthContext

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –≤ localStorage
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
```tsx
interface AuthContextType {
  user: User | null;
  isAuthenticated: boolean;
  token: string | null; // –ù–æ–≤–æ–µ –ø–æ–ª–µ
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π apiService

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `jwt_token` –≤–º–µ—Å—Ç–æ `authToken`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Bearer —Ç–æ–∫–µ–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –û—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ 401 –æ—à–∏–±–∫–µ

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—Ç—Ä–∞–Ω—ã

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç PhoneInput –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω—ã:

| –ö–æ–¥ | –°—Ç—Ä–∞–Ω–∞ | –§–ª–∞–≥ |
|-----|--------|------|
| +7 | –†–æ—Å—Å–∏—è | üá∑üá∫ |
| +7 | –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω | üá∞üáø |
| +375 | –ë–µ–ª–∞—Ä—É—Å—å | üáßüáæ |
| +380 | –£–∫—Ä–∞–∏–Ω–∞ | üá∫üá¶ |
| +374 | –ê—Ä–º–µ–Ω–∏—è | üá¶üá≤ |
| +995 | –ì—Ä—É–∑–∏—è | üá¨üá™ |
| +998 | –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω | üá∫üáø |
| +996 | –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω | üá∞üá¨ |
| +992 | –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω | üáπüáØ |
| +993 | –¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω | üáπüá≤ |
| +1 | –°–®–ê | üá∫üá∏ |
| +1 | –ö–∞–Ω–∞–¥–∞ | üá®üá¶ |
| +44 | –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è | üá¨üáß |
| +49 | –ì–µ—Ä–º–∞–Ω–∏—è | üá©üá™ |
| +33 | –§—Ä–∞–Ω—Ü–∏—è | üá´üá∑ |
| +39 | –ò—Ç–∞–ª–∏—è | üáÆüáπ |
| +34 | –ò—Å–ø–∞–Ω–∏—è | üá™üá∏ |
| +86 | –ö–∏—Ç–∞–π | üá®üá≥ |
| +81 | –Ø–ø–æ–Ω–∏—è | üáØüáµ |
| +82 | –Æ–∂–Ω–∞—è –ö–æ—Ä–µ—è | üá∞üá∑ |
| +91 | –ò–Ω–¥–∏—è | üáÆüá≥ |
| +55 | –ë—Ä–∞–∑–∏–ª–∏—è | üáßüá∑ |
| +61 | –ê–≤—Å—Ç—Ä–∞–ª–∏—è | üá¶üá∫ |
| +90 | –¢—É—Ä—Ü–∏—è | üáπüá∑ |
| +966 | –°–∞—É–¥–æ–≤—Å–∫–∞—è –ê—Ä–∞–≤–∏—è | üá∏üá¶ |
| +971 | –û–ê–≠ | üá¶üá™ |
| +972 | –ò–∑—Ä–∞–∏–ª—å | üáÆüá± |
| +20 | –ï–≥–∏–ø–µ—Ç | üá™üá¨ |
| +27 | –Æ–ê–† | üáøüá¶ |

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### 1. –í—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã –∏ –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞–Ω—É –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
- –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –±–µ–∑ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–æ–º–µ—Ä

### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
```tsx
const handleSendCode = async () => {
  try {
    await sendVerificationCode(phone);
    setCodeSent(true);
    setCodeSentTo(phone);
  } catch (err) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
  }
};
```

### 3. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT
```tsx
const handlePhoneSubmit = async (e: React.FormEvent) => {
  try {
    await loginWithPhone(phone, code, name);
    // JWT —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
    navigate('/profile');
  } catch (err) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
  }
};
```

## –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω—ã:

### –†—É—Å—Å–∫–∏–π
```tsx
'phone.country_code': '–ö–æ–¥ —Å—Ç—Ä–∞–Ω—ã',
'phone.phone_number': '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞',
'phone.name_optional': '–¢–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
```

### English
```tsx
'phone.country_code': 'Country code',
'phone.phone_number': 'Phone number',
'phone.name_optional': 'For new users only',
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT Token Management
- –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –∏–ª–∏ –æ—à–∏–±–∫–µ 401

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –≤–≤–æ–¥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ —Å—Ç–∞—Ä—ã–µ endpoints
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ email/password
- Legacy –º–µ—Ç–æ–¥—ã –≤ apiService

### –ú–∏–≥—Ä–∞—Ü–∏—è
1. –°—Ç–∞—Ä—ã–µ —Ç–æ–∫–µ–Ω—ã (`authToken`) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `jwt_token`
2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import PhoneInput from '../components/PhoneInput';

const LoginForm = () => {
  const { loginWithPhone, sendVerificationCode, loading } = useAuth();
  const [phone, setPhone] = useState('');
  const [code, setCode] = useState('');
  const [codeSent, setCodeSent] = useState(false);

  const handleSendCode = async () => {
    try {
      await sendVerificationCode(phone);
      setCodeSent(true);
    } catch (error) {
      console.error('Error sending code:', error);
    }
  };

  const handleVerifyCode = async () => {
    try {
      await loginWithPhone(phone, code);
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, JWT —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω
    } catch (error) {
      console.error('Error verifying code:', error);
    }
  };

  return (
    <div>
      <PhoneInput
        value={phone}
        onChange={setPhone}
        disabled={loading || codeSent}
      />
      
      {!codeSent ? (
        <button onClick={handleSendCode} disabled={loading}>
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
        </button>
      ) : (
        <div>
          <input
            type="text"
            value={code}
            onChange={(e) => setCode(e.target.value)}
            placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥"
          />
          <button onClick={handleVerifyCode} disabled={loading}>
            –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
          </button>
        </div>
      )}
    </div>
  );
};
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –∏–∑ —Å–ø–∏—Å–∫–∞
2. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. –í–≤–µ–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–¥
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞ –≤ localStorage

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã TypeScript —Ç–∏–ø–∞–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§—Ä–æ–Ω—Ç–µ–Ω–¥ —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ Spring Security. –î–æ–±–∞–≤–ª–µ–Ω —É–¥–æ–±–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.